(function(e){e.trace=function(){console.log.apply(console,arguments)};e.getElementOffset=function(a){for(var c=a.offsetLeft,b=a.offsetTop;(a=a.offsetParent)&&a!=document.body&&a!=document;)c+=a.offsetLeft,b+=a.offsetTop;return{x:c,y:b}};e.getUrlParams=function(){var d;var a={},c=window.location.href,b=c.indexOf("?");if(b>0)for(var c=c.substring(b+1).split("&"),b=0,f;f=c[b];b++)d=c[b]=f.split("="),f=d,a[f[0]]=f.length>1?f[1]:!0;return a}})(window);(function(e){(e.Particle=function(a,c,b){this.preX=this.x=a;this.preY=this.y=c;this.data=b;this.speedx=this.speedy=0;this.time=0.95}).prototype.update=function(){var a=this.preX-this.x,c=this.preY-this.y,b=Math.sqrt(a*a+c*c),f=mouse.x-this.x,d=mouse.y-this.y,i=Math.sqrt(f*f+d*d);if(i+Math.random()*i<260){if(i)this.time=1,this.speedx+=f/i,this.speedy+=d/i}else b&&(this.speedx+=a/b,this.speedy+=c/b);this.x+=this.speedx*this.time;this.speedx*=this.time;this.y+=this.speedy*this.time;this.speedy*=this.time;
e.speed=5;this.speedy=this.speedy>speed?speed:this.speedy;this.speedx=this.speedx>speed?speed:this.speedx;this.time-=0.0010;a=Math.abs(this.speedx)+Math.abs(this.speedy)+Math.abs(a)+Math.abs(c);if(a<5&&(this.time-=0.1,a<1))this.x=this.preX,this.y=this.preY,this.speedy=this.speedx=0;this.time=Math.max(this.time,0.1)}})(window);(function(e){function a(){d=n.width;i=o-d>>1;j=p-d>>1;g=g<=1?2:g;k.width=o;k.height=p;document.body.appendChild(k);m=getElementOffset(k);l.fillStyle="rgba(0 ,0, 0, .1)";l.drawImage(n,i,j,d,d);t.src=k.toDataURL();l.getImageData(i,j,d,d);for(var a,b=0,f=d*d/g/g;b<f;b++){a=b%(d/g)*g;for(var e=(b/d*g>>0)*g,h=l.getImageData(i+a,j+e,g,g),s=!0,r=3;r<3*g*g;r+=4)if(h.data[r]>0.5){s=!1;break}s||(a=new Particle(a+i,e+j,h),q.push(a))}trace(i,j,q.length,1);setInterval(c,1E3/u)}function c(){l.fillRect(0,0,o,p);
for(var a=0,b=q.length;a<b;a++){var c=q[a];l.putImageData(c.data,c.x,c.y);c.update()}}window.onload=function(){n.src=f;n.onload=a};var b=getUrlParams(),f=b.src||"head.png",d,i,j,g=b.pw||3,n=new Image,m={x:0,y:0},o=600,p=400,k=document.createElement("canvas"),l=k.getContext("2d"),q=[],h=e.mouse={x:0,y:0},u=60,t=e.pic=new Image;e.onmousemove=function(a){h.x=a.clientX-m.x;h.y=a.clientY-m.y;if(h.x<0||h.x>o)h.x=-1E3;if(h.y<0||h.y>p)h.y=-1E3};e.ontouchmove=function(a){a.preventDefault();h.x=a.touches[0].clientX-
m.x;h.y=a.touches[0].clientY-m.y}})(window);
